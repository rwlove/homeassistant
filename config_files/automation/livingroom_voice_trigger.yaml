- alias: "Livingroom Lights Voice Change On"
  hide_entity: true
  trigger:
    platform: mqtt
    topic: voice/livingroom/lights_on
  action:
    service: script.turn_on
    entity_id: script.livingroom_lights_on

- alias: "Livingroom Lights Voice Change Off"
  hide_entity: true
  trigger:
    platform: mqtt
    topic: voice/livingroom/lights_off
  action:
    service: script.turn_on
    entity_id: script.livingroom_lights_off

- alias: "Livingroom Lights Voice Change Color"
  hide_entity: true
  trigger:
    - platform: mqtt
      topic: voice/livingroom/lights_color
    - platform: mqtt
      topic: voice/livingroom/lights_scene  
  action:
    - service: script.notify_kodi_frontends
      data:
        message: "Changing Color of Livingroom Lights to {{ trigger.payload }}"
    - service: input_select.select_value
      data_template:
        entity_id: input_select.scene_livingroom
        value: '{{ trigger.payload | title }}'

- alias: "Livingroom Lights Voice Dim"
  hide_entity: true
  trigger:
    platform: mqtt
    topic: voice/livingroom/lights_adjust
    payload: 'dim'
  action:
    service: light.turn_on
    data_template:
#      entity_id: group.livingroom_lights
      entity_id:
        - light.lamp
#        - light.lightstrip_1
      brightness: >
        {% if states('light.lamp.brightness') | int > 200 %}
          150
        {% else %}
          50
        {% endif %}

- alias: "Livingroom Lights Voice Bright"
  hide_entity: true
  trigger:
    platform: mqtt
    topic: voice/livingroom/lights_adjust
    payload: 'bright'
  action:
    service: light.turn_on
    data_template:
#      entity_id: group.livingroom_lights
      entity_id:
        - light.lamp
 #       - light.lightstrip_1
      brightness: >
        {% if states('light.lamp.brightness') | int < 51 %}
          150
        {% else %}
          254
        {% endif %}

- alias: Livingroom Lights - Scene and Brightness Slider
  trigger:
    platform: state
    entity_id: input_select.scene_livingroom
  action:
    - service: script.notify_kodi_frontends
      data_template:
        message: 'Changing Livingroom Lights to Scene: {{ states.input_select.scene_livingroom.state }} and Brightness: {{ states.input_slider.livingroom_brightness.state }}'
    - service: light.turn_on
      data_template:
        entity_id: group.livingroom_lights
        brightness: '{{ states.input_slider.livingroom_brightness.state | int }}'
        profile: "{{ states.input_select.scene_livingroom.state | lower }}"